<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- The above 3 meta tags *must* come first in the head; any other head content must come *after* these tags -->
    <title>Bootstrap 101 Template</title>

    <!-- Bootstrap -->
  <!--  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/css/bootstrap.min.css" integrity="sha384-Zug+QiDoJOrZ5t4lssLdxGhVrurbmBWopoEl+M6BdEfwnCJZtKxi1KgxUyJq13dy" crossorigin="anonymous"> -->
    <link href="style/bootstrap.min.css" rel="stylesheet" />
    <link href="style/custom.min.css" rel="stylesheet">

    <!-- HTML5 shim and Respond.js for IE8 support o f HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]> <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script> <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script> <![endif]-->
  </head>
  <body>
    <div class="navbar navbar-expand-lg fixed-bottom navbar-dark bg-dark">
      <div class="container">
        <!-- Brand and toggle get grouped for better mobile display -->
        <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbar2" aria-controls="navbar2" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>

        <!-- Collection of nav links and other content for toggling -->
        <div class="navbar-collapse collapse" id="navbar2">
          <ul class="navbar-nav">
            <li class="nav-item">
              <a class="nav-link" href="#">Join Audio</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">Join Video</a>
            </li>
          </ul>
          <ul class="navbar-nav ml-auto">
            <li class="nav-item">
              <a class="nav-link" href="#">Invite</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">Participants</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">Share Screen</a>
            </li>
            <li class="nav-item">
              <a class="nav-link" href="#">Chat</a>
            </li>
          </ul>
          <ul class="navbar-nav ml-auto">
            <li class="nav-item">
              <a class="nav-link" href="#" style="color: red; font-weight: bold;">Leave Meeting</a>
            </li>
          </ul>
        </div>
      </div>
    </div>


      <div class="camera-container">
        <div class="camera-wrap"></div>
        <div class="camera-wrap"></div>
        <div class="camera-wrap"></div>
        <div class="camera-wrap"></div>
        <div class="camera-wrap"></div>
      </div>


    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.3/js/bootstrap.min.js" integrity="sha384-a5N7Y/aK3qNeh15eJKGWxsqtnX/wWdSZSKp+81YjTmS15nvnvxKHuzaWwXHDli+4" crossorigin="anonymous"></script>

    <script type="text/javascript">
      $(document).ready(function () {

        function getRandomInt(min, max) {
            return Math.floor(Math.random() * (max - min + 1)) + min;
        }

        function makeEqualSize() {
          var wrap = $('.camera-container');
          var elements = $(".camera-container").find('.camera-wrap');

          var windowWidth = wrap.width();
          var windowHeight = wrap.height();

          var count = elements.length;
          var rows = Math.floor(Math.sqrt(count));
          var cols = Math.ceil(Math.sqrt(count));

          var elWidth = (windowWidth / cols);
          var elHeight = (windowHeight / rows);

          elements.css({
            width: elWidth + "px",
            height: elHeight + "px"
          });

        }

        function doTick() {
          var count = getRandomInt(1,24);
          var wrap = $('.camera-container');
          var margin = 6;

          var windowWidth = wrap.width() - (count * margin);
          var windowHeight = wrap.height() - (count * margin);

          var rows = Math.floor(Math.sqrt(count));
          var cols = Math.ceil(Math.sqrt(count));

          var elWidth = ((windowWidth - (count * margin))  / cols);
          var elHeight = ((windowHeight - (count * margin)) / cols);

          //var elHeight = elWidth * 0.5625;// (windowHeight / cols);
          //We do * 0.5625 because we want to keep an 16:9 aspect ratio.
          //TODO: Keep aspect ratio...

          console.log("Width: " + elWidth + " Height: " + elHeight + " Cols: " + cols + " Rows: " + rows);

          wrap.html("");

          for (var i = 0; i < count; i++) {
            wrap.append("<div class='camera-wrap' style='width:" + elWidth + "px;height: "+ elHeight + "px;'><div class='camera-video'>  </div></div>");
          }
        }

        $(window).resize(function (e) {
          makeEqualSize();
        });

        setInterval(doTick, 5000);
        doTick();
      });
    </script>

  </body>
</html>
